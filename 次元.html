<!DOCTYPE html>﻿
<html lang="zh-CN">﻿
<head>﻿
    <meta charset="UTF-8">﻿
    <meta name="viewport" content="width=device-width, initial-scale=1.0">﻿
    <title>次元资源</title>﻿
    <style>﻿
        * { margin: 0; padding: 0; box-sizing: border-box; }﻿
        body { font-family: Roboto, sans-serif; background: #f5f7fa; color: #333; }﻿
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }﻿
        /* 公告栏 */﻿
        .notice { background: #e8f4f8; border-radius: 8px; padding: 15px; margin-bottom: 20px; text-align: center; color: #2d3748; }﻿
        /* 登录/注册面板 */﻿
        .auth-panel { max-width: 400px; margin: 50px auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); }﻿
        .auth-tabs { display: flex; margin-bottom: 25px; border-bottom: 1px solid #eee; }﻿
        .auth-tab { flex: 1; text-align: center; padding: 10px; cursor: pointer; font-weight: 600; color: #999; }﻿
        .auth-tab.active { color: #4299e1; border-bottom: 2px solid #4299e1; }﻿
        .auth-form { display: none; }﻿
        .auth-form.active { display: block; }﻿
        .form-group { margin-bottom: 20px; }﻿
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; }﻿
        .form-control { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; outline: none; }﻿
        .auth-btn { width: 100%; padding: 12px; background: #4299e1; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; }﻿
        /* 头部 */﻿
        .header { display: flex; flex-wrap: wrap; align-items: center; gap: 15px; margin-bottom: 25px; }﻿
        .header h1 { flex: 1; min-width: 200px; color: #2d3748; }﻿
        .search-box { flex: 2; min-width: 250px; position: relative; }﻿
        .search-input { width: 100%; padding: 12px 15px 12px 40px; border: 1px solid #ddd; border-radius: 8px; outline: none; }﻿
        .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #999; }﻿
        .user-info { flex: 1; min-width: 200px; text-align: right; }﻿
        .points { font-weight: bold; color: #4299e1; }﻿
        .points-btn { padding: 6px 12px; background: #48bb78; color: white; border: none; border-radius: 6px; cursor: pointer; margin: 0 10px; }﻿
        .logout-btn { padding: 6px 12px; background: #f56565; color: white; border: none; border-radius: 6px; cursor: pointer; }﻿
        /* 分类导航 */﻿
        .category-nav { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 25px; }﻿
        .category-btn { padding: 10px 20px; border: none; border-radius: 8px; background: #fff; color: #4a5568; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }﻿
        .category-btn.active { background: #4299e1; color: white; }﻿
        /* 内容网格（每行2个） */﻿
        .content-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px; }﻿
        .content-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 3px 10px rgba(0,0,0,0.08); transition: transform 0.3s; cursor: pointer; }﻿
        .content-card:hover { transform: translateY(-3px); }﻿
        .content-cover { width: 100%; height: 280px; background: #f0f0f0; background-size: cover; background-position: center; }﻿
        .content-title { padding: 15px; text-align: center; font-weight: 600; }﻿
        /* 积分任务页（独立） */﻿
        .points-page { background: white; border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 3px 10px rgba(0,0,0,0.08); display: none; }﻿
        .points-page h2 { margin-bottom: 20px; color: #2d3748; }﻿
        .task-list { display: flex; flex-direction: column; gap: 15px; margin-bottom: 25px; }﻿
        .task-item { padding: 15px; border: 1px solid #eee; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }﻿
        .task-btn { padding: 8px 16px; background: #48bb78; color: white; border: none; border-radius: 6px; cursor: pointer; }﻿
        .task-btn.disabled { background: #ccc; cursor: not-allowed; }﻿
        /* 后台样式 */﻿
        .admin-panel { display: none; }﻿
        .form-row { display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; }﻿
        .form-col { flex: 1; min-width: 200px; }﻿
        .upload-btn { background: #38b2ac; }﻿
        .user-management { margin: 30px 0; }﻿
        .user-table { width: 100%; border-collapse: collapse; margin-top: 15px; }﻿
        .user-table th, .user-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }﻿
        .user-table th { background: #f8f9fa; }﻿
        .set-points-btn { padding: 6px 12px; background: #9f7aea; color: white; border: none; border-radius: 6px; cursor: pointer; }﻿
        /* 底部按钮 */﻿
        .footer-btns { display: flex; gap: 15px; justify-content: center; margin: 20px 0; }﻿
        .page-btn { padding: 10px 20px; border: none; border-radius: 8px; background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.05); cursor: pointer; }﻿
        .admin-entry { position: fixed; bottom: 20px; right: 20px; width: 40px; height: 40px; border-radius: 50%; background: #9f7aea; color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); display: none; }﻿
    </style>﻿
</head>﻿
<body>﻿
    <!-- 登录/注册面板（默认显示） -->﻿
    <div class="auth-panel" id="auth-panel">﻿
        <div class="auth-tabs">﻿
            <div class="auth-tab active" onclick="switchAuth('login')">登录</div>﻿
            <div class="auth-tab" onclick="switchAuth('register')">注册</div>﻿
        </div>﻿
        <!-- 登录表单 -->﻿
        <div class="auth-form active" id="login-form">﻿
            <div class="form-group">﻿
                <label>用户名</label>﻿
                <input type="text" class="form-control" id="login-username" placeholder="输入用户名">﻿
            </div>﻿
            <div class="form-group">﻿
                <label>密码</label>﻿
                <input type="password" class="form-control" id="login-pwd" placeholder="输入密码">﻿
            </div>﻿
            <button class="auth-btn" onclick="userLogin()">登录</button>﻿
        </div>﻿
        <!-- 注册表单 -->﻿
        <div class="auth-form" id="register-form">﻿
            <div class="form-group">﻿
                <label>用户名</label>﻿
                <input type="text" class="form-control" id="reg-username" placeholder="设置用户名">﻿
            </div>﻿
            <div class="form-group">﻿
                <label>密码</label>﻿
                <input type="password" class="form-control" id="reg-pwd" placeholder="设置密码">﻿
            </div>﻿
            <button class="auth-btn" onclick="userRegister()">注册</button>﻿
        </div>﻿
    </div>﻿
    <!-- 前台页面（登录后显示） -->﻿
    <div class="container" id="front-end" style="display: none;">﻿
        <!-- 公告栏 -->﻿
        <div class="notice" id="notice">欢迎使用资源平台，完成任务获取积分解锁内容~</div>﻿
﻿
        <!-- 头部：标题+搜索+用户信息 -->﻿
        <div class="header">﻿
            <h1>多媒体资源平台</h1>﻿
            <div class="search-box">﻿
                <span class="search-icon">🔍</span>﻿
                <input type="text" class="search-input" id="search-input" placeholder="搜索标题...">﻿
            </div>﻿
            <div class="user-info">﻿
                用户名：<span id="current-username"></span> | ﻿
                积分：<span class="points" id="user-points">0</span>﻿
                <button class="points-btn" onclick="showPointsPage()">积分获取</button>﻿
                <button class="logout-btn" onclick="userLogout()">退出</button>﻿
            </div>﻿
        </div>﻿
        <!-- 分类导航 -->﻿
        <div class="category-nav">﻿
            <button class="category-btn active" data-type="all">全部</button>﻿
            <button class="category-btn" data-type="comic">漫画</button>﻿
            <button class="category-btn" data-type="anime">动漫</button>﻿
            <button class="category-btn" data-type="movie">电影</button>﻿
            <button class="category-btn" data-type="illustration">插画</button>﻿
            <button class="category-btn" data-type="video">在线视频</button>﻿
            <button class="category-btn" data-type="software">软件</button>﻿
        </div>﻿
        <!-- 内容展示区 -->﻿
        <div class="content-grid" id="content-grid">﻿
            <div style="grid-column: 1/3; text-align: center; padding: 50px; color: #999;">暂无内容</div>﻿
        </div>﻿
        <!-- 积分任务页（独立显示） -->﻿
        <div class="points-page" id="points-page">﻿
            <h2>积分获取中心</h2>﻿
            <div class="task-list" id="task-list">﻿
                <!-- 任务由后台设置 -->﻿
            </div>﻿
            <button class="page-btn" onclick="showFrontPage()">返回资源首页</button>﻿
        </div>﻿
    </div>﻿
    <!-- 后台面板（管理员登录后显示） -->﻿
    <div class="container admin-panel" id="admin-panel">﻿
        <h2>管理员后台</h2>﻿
        <button class="page-btn" onclick="userLogout()">退出登录</button>﻿
        <!-- 公告设置 -->﻿
        <div class="form-group">﻿
            <label>平台公告</label>﻿
            <input type="text" class="form-control" id="notice-input" placeholder="输入公告内容">﻿
        </div>﻿
        <!-- 内容上传 -->﻿
        <div class="form-group">﻿
            <h3>上传内容</h3>﻿
            <div class="form-row">﻿
                <div class="form-col">﻿
                    <label>内容标题</label>﻿
                    <input type="text" class="form-control" id="content-title" placeholder="输入标题">﻿
                </div>﻿
                <div class="form-col">﻿
                    <label>内容分类</label>﻿
                    <select class="form-control" id="content-type">﻿
                        <option value="comic">漫画</option>﻿
                        <option value="anime">动漫</option>﻿
                        <option value="movie">电影</option>﻿
                        <option value="illustration">插画</option>﻿
                        <option value="video">在线视频</option>﻿
                        <option value="software">软件</option>﻿
                    </select>﻿
                </div>﻿
            </div>﻿
            <div class="form-row">﻿
                <div class="form-col">﻿
                    <label>封面图片URL</label>﻿
                    <input type="text" class="form-control" id="content-cover" placeholder="输入图片链接">﻿
                </div>﻿
                <div class="form-col">﻿
                    <label>访问链接</label>﻿
                    <input type="text" class="form-control" id="content-link" placeholder="输入跳转链接">﻿
                </div>﻿
            </div>﻿
            <button class="auth-btn upload-btn" onclick="uploadContent()">上传内容</button>﻿
        </div>﻿
        <!-- 任务设置 -->﻿
        <div class="form-group">﻿
            <h3>积分任务设置</h3>﻿
            <div class="form-row">﻿
                <div class="form-col">﻿
                    <label>任务1名称</label>﻿
                    <input type="text" class="form-control" id="task1-name" placeholder="输入任务名称" value="每日签到">﻿
                </div>﻿
                <div class="form-col">﻿
                    <label>任务1链接（签到无需填写）</label>﻿
                    <input type="text" class="form-control" id="task1-link" placeholder="无需填写" disabled>﻿
                </div>﻿
            </div>﻿
            <div class="form-row">﻿
                <div class="form-col">﻿
                    <label>任务2名称</label>﻿
                    <input type="text" class="form-control" id="task2-name" placeholder="输入任务名称" value="邀请好友">﻿
                </div>﻿
                <div class="form-col">﻿
                    <label>任务2链接</label>﻿
                    <input type="text" class="form-control" id="task2-link" placeholder="输入跳转链接">﻿
                </div>﻿
            </div>﻿
            <div class="form-row">﻿
                <div class="form-col">﻿
                    <label>任务3名称</label>﻿
                    <input type="text" class="form-control" id="task3-name" placeholder="输入任务名称" value="观看广告">﻿
                </div>﻿
                <div class="form-col">﻿
                    <label>任务3链接</label>﻿
                    <input type="text" class="form-control" id="task3-link" placeholder="输入跳转链接">﻿
                </div>﻿
            </div>﻿
            <button class="auth-btn" onclick="saveTasks()">保存任务</button>﻿
        </div>﻿
        <!-- 用户管理（设置积分） -->﻿
        <div class="user-management">﻿
            <h3>用户管理</h3>﻿
            <table class="user-table" id="user-table">﻿
                <thead>﻿
                    <tr>﻿
                        <<th>用户名</</th>﻿
                        <<th>当前积分</</th>﻿
                        <<th>操作</</th>﻿
                    </tr>﻿
                </thead>﻿
                <tbody>﻿
                    <!-- 用户列表由系统生成 -->﻿
                </tbody>﻿
            </table>﻿
        </div>﻿
    </div>﻿
    <script>﻿
        // 初始化系统数据（强制更新管理员密码，兼容旧数据）﻿
        const initSystemData = () => {﻿
            const defaultData = {﻿
                notice: '欢迎使用资源平台，完成任务获取积分解锁内容~',﻿
                contents: [],﻿
                tasks: [﻿
                    { name: '每日签到', link: '#' },﻿
                    { name: '邀请好友', link: '#' },﻿
                    { name: '观看广告', link: '#' }﻿
                ],﻿
                users: [﻿
                    // 管理员初始密码设为18046156515abc﻿
                    { username: 'admin', password: '18046156515abc', role: 'admin', points: 9999, lastCheckinDate: '' }﻿
                ],﻿
                currentUser: null﻿
            };﻿
﻿
            if (!localStorage.getItem('platformSystem')) {﻿
                // 首次初始化：直接用新密码﻿
                localStorage.setItem('platformSystem', JSON.stringify(defaultData));﻿
            } else {﻿
                // 已有旧数据：强制更新管理员密码，补充缺失字段﻿
                const data = JSON.parse(localStorage.getItem('platformSystem'));﻿
                // 找到管理员账号并更新密码﻿
                const adminIndex = data.users.findIndex(u => u.username === 'admin'&&u.role === 'admin');﻿
                if (adminIndex > -1) {﻿
                    data.users[adminIndex].password = '18046156515abc'; // 强制覆盖旧密码﻿
                    data.users[adminIndex].lastCheckinDate = data.users[adminIndex].lastCheckinDate || '';﻿
                } else {﻿
                    // 若管理员账号丢失，重新添加﻿
                    data.users.push(defaultData.users[0]);﻿
                }﻿
                // 给所有用户补充lastCheckinDate字段﻿
                data.users = data.users.map(user => ({ ...user, lastCheckinDate: user.lastCheckinDate || '' }));﻿
                saveSystemData(data);﻿
            }﻿
        };﻿
        // 数据操作工具﻿
        const getSystemData = () => JSON.parse(localStorage.getItem('platformSystem'));﻿
        const saveSystemData = (data) => localStorage.setItem('platformSystem', JSON.stringify(data));﻿
        // 获取当前日期（YYYY-MM-DD）﻿
        const getCurrentDate = () => {﻿
            const date = new Date();﻿
            return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;﻿
        };﻿
        // 切换登录/注册表单﻿
        const switchAuth = (type) => {﻿
            const loginTab = document.querySelectorAll('.auth-tab')[0];﻿
            const regTab = document.querySelectorAll('.auth-tab')[1];﻿
            const loginForm = document.getElementById('login-form');﻿
            const regForm = document.getElementById('register-form');﻿
﻿
            if (type === 'login') {﻿
                loginTab.classList.add('active');﻿
                regTab.classList.remove('active');﻿
                loginForm.classList.add('active');﻿
                regForm.classList.remove('active');﻿
            } else {﻿
                loginTab.classList.remove('active');﻿
                regTab.classList.add('active');﻿
                loginForm.classList.remove('active');﻿
                regForm.classList.add('active');﻿
            }﻿
        };﻿
        // 用户注册（用户名重复提示"用户名已存在"）﻿
        const userRegister = () => {﻿
            const username = document.getElementById('reg-username').value.trim();﻿
            const password = document.getElementById('reg-pwd').value.trim();﻿
            if (!username || !password) return alert('用户名和密码不能为空！');﻿
﻿
            const data = getSystemData();﻿
            const userExists = data.users.some(u => u.username === username);﻿
            if (userExists) return alert('用户名已存在');﻿
﻿
            data.users.push({ username, password, role: 'user', points: 0, lastCheckinDate: '' });﻿
            saveSystemData(data);﻿
            alert('注册成功！请登录');﻿
            switchAuth('login');﻿
            document.getElementById('login-username').value = username;﻿
        };﻿
        // 用户登录（精准提示：用户名不存在/密码错误）﻿
        const userLogin = () => {﻿
            const username = document.getElementById('login-username').value.trim();﻿
            const password = document.getElementById('login-pwd').value.trim();﻿
            if (!username || !password) return alert('用户名和密码不能为空！');﻿
﻿
            const data = getSystemData();﻿
            // 先判断用户名是否存在﻿
            const user = data.users.find(u => u.username === username);﻿
            if (!user) return alert('用户名不存在！');﻿
﻿
            // 用户名存在，判断密码是否正确﻿
            if (user.password !== password) return alert('密码错误！');﻿
﻿
            // 登录成功﻿
            data.currentUser = user;﻿
            saveSystemData(data);﻿
            document.getElementById('auth-panel').style.display = 'none';﻿
            if (user.role === 'admin') {﻿
                document.getElementById('admin-panel').style.display = 'block';﻿
                renderAdminPanel();﻿
            } else {﻿
                document.getElementById('front-end').style.display = 'block';﻿
                renderFrontPage();﻿
            }﻿
        };﻿
        // 用户退出﻿
        const userLogout = () => {﻿
            const data = getSystemData();﻿
            data.currentUser = null;﻿
            saveSystemData(data);﻿
            document.getElementById('admin-panel').style.display = 'none';﻿
            document.getElementById('front-end').style.display = 'none';﻿
            document.getElementById('auth-panel').style.display = 'block';﻿
            document.getElementById('login-username').value = '';﻿
            document.getElementById('login-pwd').value = '';﻿
        };﻿
        // 渲染前台页面﻿
        const renderFrontPage = () => {﻿
            const data = getSystemData();﻿
            const currentUser = data.currentUser;﻿
            document.getElementById('current-username').textContent = currentUser.username;﻿
            document.getElementById('user-points').textContent = currentUser.points;﻿
            document.getElementById('notice').textContent = data.notice;﻿
            renderContents('all');﻿
            renderTasks();﻿
        };﻿
        // 渲染内容﻿
        const renderContents = (type) => {﻿
            const data = getSystemData();﻿
            const grid = document.getElementById('content-grid');﻿
            let contents = data.contents;﻿
            if (type !== 'all') contents = contents.filter(item => item.type === type);﻿
            const searchVal = document.getElementById('search-input').value.trim().toLowerCase();﻿
            if (searchVal) contents = contents.filter(item => item.title.toLowerCase().includes(searchVal));﻿
﻿
            grid.innerHTML = contents.length ﻿
                ? contents.map(item => `﻿
                    <div class="content-card" onclick="window.open('${item.link}', '_blank')">﻿
                        <div class="content-cover" style="background-image: url('${item.cover || 'https://picsum.photos/400/600'}')"></div>﻿
                        <div class="content-title">${item.title}</div>﻿
                    </div>﻿
                `).join('')﻿
                : '<div style="grid-column: 1/3; text-align: center; padding: 50px; color: #999;">暂无内容</div>';﻿
        };﻿
        // 渲染积分任务（新增签到状态判断）﻿
        const renderTasks = () => {﻿
            const data = getSystemData();﻿
            const currentUser = data.currentUser;﻿
            const taskList = document.getElementById('task-list');﻿
            const today = getCurrentDate();﻿
            const hasCheckedIn = currentUser.lastCheckinDate === today;﻿
            taskList.innerHTML = data.tasks.map((task, idx) => {﻿
                // 任务1为每日签到，单独处理﻿
                if (idx === 0) {﻿
                    return `﻿
                        <div class="task-item">﻿
                            <span>${idx+1}. ${task.name}（+10积分/天）</span>﻿
                            <button class="task-btn ${hasCheckedIn ? 'disabled' : ''}" onclick="${hasCheckedIn ? '' : 'checkin()'}">﻿
                                ${hasCheckedIn ? '今日已签到' : '立即签到'}﻿
                            </button>﻿
                        </div>﻿
                    `;﻿
                }﻿
                // 其他任务正常渲染﻿
                return `﻿
                    <div class="task-item">﻿
                        <span>${idx+1}. ${task.name}</span>﻿
                        <button class="task-btn" onclick="window.open('${task.link}', '_blank')">去完成</button>﻿
                    </div>﻿
                `;﻿
            }).join('');﻿
        };﻿
        // 每日签到功能（+10积分，每日一次）﻿
        const checkin = () => {﻿
            const data = getSystemData();﻿
            const currentUser = data.currentUser;﻿
            const today = getCurrentDate();﻿
            // 再次验证是否已签到（防止重复提交）﻿
            if (currentUser.lastCheckinDate === today) {﻿
                alert('今日已签到，请勿重复操作！');﻿
                return;﻿
            }﻿
            // 增加10积分，更新签到日期﻿
            currentUser.points += 10;﻿
            currentUser.lastCheckinDate = today;﻿
            // 更新用户列表中的数据﻿
            const userIndex = data.users.findIndex(u => u.username === currentUser.username);﻿
            data.users[userIndex] = currentUser;﻿
            data.currentUser = currentUser;﻿
            saveSystemData(data);﻿
            alert('签到成功！获得10积分～');﻿
            // 刷新积分和任务状态﻿
            document.getElementById('user-points').textContent = currentUser.points;﻿
            renderTasks();﻿
        };﻿
        // 渲染管理员面板﻿
        const renderAdminPanel = () => {﻿
            const data = getSystemData();﻿
            document.getElementById('notice-input').value = data.notice;﻿
            document.getElementById('task1-name').value = data.tasks[0].name;﻿
            document.getElementById('task2-name').value = data.tasks[1].name;﻿
            document.getElementById('task2-link').value = data.tasks[1].link;﻿
            document.getElementById('task3-name').value = data.tasks[2].name;﻿
            document.getElementById('task3-link').value = data.tasks[2].link;﻿
            renderUserList();﻿
        };﻿
        // 渲染用户列表﻿
        const renderUserList = () => {﻿
            const data = getSystemData();﻿
            const userTable = document.querySelector('#user-table tbody');﻿
            userTable.innerHTML = data.users.map(user => `﻿
                <tr>﻿
                    <td>${user.username} ${user.role === 'admin' ? '(管理员)' : ''}</td>﻿
                    <td>${user.points}</td>﻿
                    <td>﻿
                        <input type="number" placeholder="新积分" class="form-control" style="width: 100px; display: inline-block; margin-right: 10px;" id="points-${user.username}">﻿
                        <button class="set-points-btn" onclick="setUserPoints('${user.username}')">设置</button>﻿
                    </td>﻿
                </tr>﻿
            `).join('');﻿
        };﻿
        // 设置用户积分﻿
        const setUserPoints = (username) => {﻿
            const newPoints = parseInt(document.getElementById(`points-${username}`).value);﻿
            if (isNaN(newPoints) || newPoints<0) return alert('请输入有效积分（非负整数）！');﻿
﻿
            const data = getSystemData();﻿
            const userIndex = data.users.findIndex(u => u.username === username);﻿
            data.users[userIndex].points = newPoints;﻿
            if (data.currentUser?.username === username) data.currentUser.points = newPoints;﻿
            saveSystemData(data);﻿
            alert('积分设置成功！');﻿
            renderUserList();﻿
            if (document.getElementById('front-end').style.display === 'block') {﻿
                document.getElementById('user-points').textContent = newPoints;﻿
            }﻿
        };﻿
        // 上传内容﻿
        const uploadContent = () => {﻿
            const title = document.getElementById('content-title').value.trim();﻿
            const type = document.getElementById('content-type').value;﻿
            const cover = document.getElementById('content-cover').value.trim();﻿
            const link = document.getElementById('content-link').value.trim();﻿
            if (!title || !link) return alert('标题和链接不能为空！');﻿
﻿
            const data = getSystemData();﻿
            data.contents.push({ title, type, cover, link });﻿
            saveSystemData(data);﻿
            alert('上传成功！');﻿
            document.getElementById('content-title').value = '';﻿
            document.getElementById('content-cover').value = '';﻿
            document.getElementById('content-link').value = '';﻿
            if (document.getElementById('front-end').style.display === 'block') {﻿
                renderContents(document.querySelector('.category-btn.active').dataset.type);﻿
            }﻿
        };﻿
        // 保存任务设置（签到任务链接禁用编辑）﻿
        const saveTasks = () => {﻿
            const task1Name = document.getElementById('task1-name').value.trim() || '每日签到';﻿
            const task2Name = document.getElementById('task2-name').value.trim() || '邀请好友';﻿
            const task2Link = document.getElementById('task2-link').value.trim() || '#';﻿
            const task3Name = document.getElementById('task3-name').value.trim() || '观看广告';﻿
            const task3Link = document.getElementById('task3-link').value.trim() || '#';﻿
﻿
            const data = getSystemData();﻿
            data.tasks = [﻿
                { name: task1Name, link: '#' }, // 签到任务链接固定为#﻿
                { name: task2Name, link: task2Link },﻿
                { name: task3Name, link: task3Link }﻿
            ];﻿
            saveSystemData(data);﻿
            alert('任务保存成功！');﻿
            if (document.getElementById('front-end').style.display === 'block') renderTasks();﻿
        };﻿
        // 页面切换：资源首页/积分任务页﻿
        const showFrontPage = () => {﻿
            document.getElementById('content-grid').style.display = 'grid';﻿
            document.querySelector('.category-nav').style.display = 'flex';﻿
            document.getElementById('points-page').style.display = 'none';﻿
        };﻿
        const showPointsPage = () => {﻿
            document.getElementById('content-grid').style.display = 'none';﻿
            document.querySelector('.category-nav').style.display = 'none';﻿
            document.getElementById('points-page').style.display = 'block';﻿
        };﻿
        // 分类切换事件﻿
        document.querySelectorAll('.category-btn').forEach(btn => {﻿
            btn.addEventListener('click', () => {﻿
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));﻿
                btn.classList.add('active');﻿
                renderContents(btn.dataset.type);﻿
            });﻿
        });﻿
        // 搜索事件﻿
        document.getElementById('search-input').addEventListener('input', () => {﻿
            const activeType = document.querySelector('.category-btn.active').dataset.type;﻿
            renderContents(activeType);﻿
        });﻿
        // 初始化﻿
        window.onload = () => {﻿
            initSystemData();﻿
            const data = getSystemData();﻿
            if (data.currentUser) {﻿
                document.getElementById('auth-panel').style.display = 'none';﻿
                if (data.currentUser.role === 'admin') {﻿
                    document.getElementById('admin-panel').style.display = 'block';﻿
                    renderAdminPanel();﻿
                } else {﻿
                    document.getElementById('front-end').style.display = 'block';﻿
                    renderFrontPage();﻿
                }﻿
            }﻿
        };﻿
    </script>﻿
</body>﻿
                        </html>
